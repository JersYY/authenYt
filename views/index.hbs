<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Fashion HUB</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous" />
        <link href="/style.css" rel="stylesheet" />
    </head>
    <body>
        <!-- Navbar -->
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark text-uppercase fs-6 p-3 border-bottom align-items-center">
            <div class="container-fluid">
                <div class="row justify-content-between align-items-center w-100">
                    
                    <!-- Brand Logo -->
                    <div class="col-auto">
                        <a class="navbar-brand" href="/">SHOP.CO</a>
                    </div>

                    <!-- Toggle Button -->
                    <div class="col-auto">
                        <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar">
                            <span class="navbar-toggler-icon"></span>
                        </button>

                        <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
                            <div class="offcanvas-header">
                                <h5 class="offcanvas-title" id="offcanvasNavbarLabel">Menu</h5>
                                <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                            </div>

                            <div class="offcanvas-body">
                                <ul class="navbar-nav justify-content-end flex-grow-1 gap-1 gap-md-5 pe-3">
                                    <li class="nav-item">
                                        <a class="nav-link active" href="/">Home</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="/allProduk">Shop</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="#">About</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="#">Contact</a>
                                    </li>

                                    {{#if user}}
                                    <li class="nav-item">
                                        <a class="nav-link" href="/dashboard">Dashboard</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="/dashboard#orders">Orders</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="/dashboard#wishlist">Wishlist</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="/dashboard#cart">Cart</a>
                                    </li>
                                    {{else}}
                                    <li class="nav-item">
                                        <a class="nav-link" href="/login">Login</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="/register">Register</a>
                                    </li>
                                    {{/if}}
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- User Info and Icons -->
                    <div class="col-3 col-lg-auto">
                        <ul class="list-unstyled d-flex m-0">
                            {{#if user}}
                            <li class="d-none d-lg-block">
                                <a href="/auth/logout" class="text-uppercase mx-3 text-danger">Logout</a>
                            </li>
                            {{else}}
                            <!-- Wishlist and Cart hidden before login -->
                            {{/if}}

                            <li class="search-box">
                                <a href="#search" class="search-button text-white">
                                    <svg width="24" height="24" viewBox="0 0 24 24">
                                        <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5
                                        16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5
                                        16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5
                                        4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5
                                        9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5
                                        14z" fill="currentColor"></path>
                                    </svg>
                                </a>
                            </li>
                            <li class="ms-3">
                                <a href="/dashboard#cart" class="text-white">
                                    <i class="bi bi-cart fs-5"></i>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Hero Section -->
        <section class="hero-section py-5">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-6">
                        <h1 class="display-3 fw-bold mb-4">FIND CLOTHES<br>THAT MATCHES<br>YOUR STYLE</h1>
                        <p class="lead mb-4">Browse through our diverse range of meticulously crafted garments, designed to bring out your individuality and cater to your sense of style.</p>
                        <button class="btn btn-dark btn-lg px-4 me-2">Shop Now</button>
                        <a href="#" class="btn btn-outline-dark btn-lg px-4">Browse Collections</a>
                        
                        <div class="d-flex justify-content-between mt-5 pt-4">
                            <div class="text-center">
                                <h2 class="fw-bold">200+</h2>
                                <p>International Brands</p>
                            </div>
                            <div class="text-center">
                                <h2 class="fw-bold">2,000+</h2>
                                <p>High-Quality Products</p>
                            </div>
                            <div class="text-center">
                                <h2 class="fw-bold">30,000+</h2>
                                <p>Happy Customers</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <img src="/img/product-item-1.jpg" class="img-fluid rounded" alt="Fashion showcase">
                    </div>
                </div>
            </div>
        </section>

        <!-- Brands Section -->
        <section class="brands-section py-4 bg-light">
            <div class="container">
                <div class="row justify-content-around align-items-center">
                    <div class="col-auto">
                        <h3 class="text-uppercase mb-0">Versace</h3>
                    </div>
                    <div class="col-auto">
                        <h3 class="text-uppercase mb-0">ZYN</h3>
                    </div>
                    <div class="col-auto">
                        <h3 class="text-uppercase mb-0">Gucci</h3>
                    </div>
                    <div class="col-auto">
                        <h3 class="text-uppercase mb-0">Prada</h3>
                    </div>
                    <div class="col-auto">
                        <h3 class="text-uppercase mb-0">Calvin Klein</h3>
                    </div>
                </div>
            </div>
        </section>

        <!-- New Arrivals -->
        <section class="new-arrivals py-5">
            <div class="container">
                <div class="d-flex justify-content-between align-items-center mb-5">
                    <h2 class="section-title">NEW ARRIVALS</h2>
                    <a href="/allProduk" class="btn btn-outline-dark">View All</a>
                </div>
                
                <div class="row">
                    {{#each products}}
                    <div class="col-md-3 mb-4">
                        <div class="card border-0 shadow-sm position-relative">
                            <div onclick="toggleWishlist({{this.id}})" class="favorite-icon position-absolute top-0 end-0 p-2" style="cursor: pointer;">
                                {{#if (includes ../wishlistProductIds this.id)}}
                                    <i class="bi bi-heart-fill text-danger"></i>
                                {{else}}
                                    <i class="bi bi-heart"></i>
                                {{/if}}
                            </div>
                            <img src="{{this.image_url}}" class="card-img-top" alt="{{this.name}}">
                            <div class="card-body">
                                <h5 class="card-title">{{this.name}}</h5>
                                <p class="card-text text-primary fw-bold">${{this.price}}</p>
                                <button class="btn btn-outline-dark btn-sm">Add to Cart</button>
                            </div>
                        </div>
                    </div>
                    {{/each}}
                </div>
            </div>
        </section>

        <!-- Top Selling -->
        <section class="top-selling py-5 bg-light">
            <div class="container">
                <div class="d-flex justify-content-between align-items-center mb-5">
                    <h2 class="section-title">TOP SELLING</h2>
                    <a href="/allProduk" class="btn btn-outline-dark">View All</a>
                </div>
                
                <div class="row">
                    {{#each products}}
                    <div class="col-md-3 mb-4">
                        <div class="card border-0 shadow-sm position-relative">
                            <div onclick="toggleWishlist({{this.id}})" class="favorite-icon position-absolute top-0 end-0 p-2" style="cursor: pointer;">
                                {{#if (includes ../wishlistProductIds this.id)}}
                                    <i class="bi bi-heart-fill text-danger"></i>
                                {{else}}
                                    <i class="bi bi-heart"></i>
                                {{/if}}
                            </div>
                            <img src="{{this.image_url}}" class="card-img-top" alt="{{this.name}}">
                            <div class="card-body">
                                <h5 class="card-title">{{this.name}}</h5>
                                <p class="card-text text-primary fw-bold">${{this.price}}</p>
                                <button class="btn btn-outline-dark btn-sm">Add to Cart</button>
                            </div>
                        </div>
                    </div>
                    {{/each}}
                </div>
            </div>
        </section>

        <!-- Browse by Dress Style -->
        <section class="dress-style py-5">
            <div class="container">
                <h2 class="section-title text-center mb-5">BROWSE BY DRESS STYLE</h2>
                
                <div class="row g-4">
                    <div class="col-md-6">
                        <div class="card bg-dark text-white" style="height: 300px;">
                            <div class="card-body d-flex align-items-center justify-content-center">
                                <h3 class="card-title">Casual</h3>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card bg-secondary text-white" style="height: 300px;">
                            <div class="card-body d-flex align-items-center justify-content-center">
                                <h3 class="card-title">Formal</h3>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card bg-primary text-white" style="height: 300px;">
                            <div class="card-body d-flex align-items-center justify-content-center">
                                <h3 class="card-title">Party</h3>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card bg-success text-white" style="height: 300px;">
                            <div class="card-body d-flex align-items-center justify-content-center">
                                <h3 class="card-title">Gym</h3>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Customer Testimonials -->
        <section class="testimonials py-5 bg-light">
            <div class="container">
                <h2 class="section-title text-center mb-5">OUR HAPPY CUSTOMERS</h2>
                
                <div class="row justify-content-center">
                    <div class="col-md-8">
                        <div class="card border-0 shadow-sm">
                            <div class="card-body text-center p-5">
                                <img src="https://via.placeholder.com/100" class="rounded-circle mb-3" alt="Customer">
                                <h4 class="mb-3">Sarah M.</h4>
                                <div class="mb-3">
                                    <i class="bi bi-star-fill text-warning"></i>
                                    <i class="bi bi-star-fill text-warning"></i>
                                    <i class="bi bi-star-fill text-warning"></i>
                                    <i class="bi bi-star-fill text-warning"></i>
                                    <i class="bi bi-star-fill text-warning"></i>
                                </div>
                                <p class="lead">"I absolutely love shopping at SHOP.CO! The quality of their products is exceptional and their customer service is top-notch. I highly recommend them to all my friends!"</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Newsletter -->
        <section class="newsletter py-5">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-md-8 text-center">
                        <h2 class="section-title mb-4">STAY UPTO DATE ABOUT OUR LATEST OFFERS</h2>
                        <div class="input-group mb-3 mx-auto" style="max-width: 500px;">
                            <input type="email" class="form-control" placeholder="Enter your email address">
                            <button class="btn btn-dark" type="button">Subscribe</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="bg-dark text-white py-5">
            <div class="container">
                <div class="row">
                    <div class="col-lg-4 mb-4">
                        <h3 class="text-uppercase mb-4">SHOP.CO</h3>
                        <p>We have clothes that suits your style and which you're proud to wear. From women to men.</p>
                        <div class="social-icons mt-4">
                            <a href="#" class="text-white me-3"><i class="bi bi-twitter fs-4"></i></a>
                            <a href="#" class="text-white me-3"><i class="bi bi-facebook fs-4"></i></a>
                            <a href="#" class="text-white me-3"><i class="bi bi-instagram fs-4"></i></a>
                            <a href="#" class="text-white"><i class="bi bi-pinterest fs-4"></i></a>
                        </div>
                    </div>
                    
                    <div class="col-lg-2 col-md-4 mb-4">
                        <h5 class="text-uppercase mb-4">Company</h5>
                        <ul class="list-unstyled">
                            <li class="mb-2"><a href="#" class="text-white text-decoration-none">About</a></li>
                            <li class="mb-2"><a href="#" class="text-white text-decoration-none">Features</a></li>
                            <li class="mb-2"><a href="#" class="text-white text-decoration-none">Works</a></li>
                            <li><a href="#" class="text-white text-decoration-none">Career</a></li>
                        </ul>
                    </div>
                    
                    <div class="col-lg-2 col-md-4 mb-4">
                        <h5 class="text-uppercase mb-4">Help</h5>
                        <ul class="list-unstyled">
                            <li class="mb-2"><a href="#" class="text-white text-decoration-none">Customer Support</a></li>
                            <li class="mb-2"><a href="#" class="text-white text-decoration-none">Delivery Details</a></li>
                            <li class="mb-2"><a href="#" class="text-white text-decoration-none">Terms & Conditions</a></li>
                            <li><a href="#" class="text-white text-decoration-none">Privacy Policy</a></li>
                        </ul>
                    </div>
                    
                    <div class="col-lg-2 col-md-4 mb-4">
                        <h5 class="text-uppercase mb-4">Resources</h5>
                        <ul class="list-unstyled">
                            <li class="mb-2"><a href="#" class="text-white text-decoration-none">Free eBooks</a></li>
                            <li class="mb-2"><a href="#" class="text-white text-decoration-none">Development Tutorial</a></li>
                            <li class="mb-2"><a href="#" class="text-white text-decoration-none">How to - Blog</a></li>
                            <li><a href="#" class="text-white text-decoration-none">Youtube Playlist</a></li>
                        </ul>
                    </div>
                    
                    <div class="col-lg-2 col-md-4 mb-4">
                        <h5 class="text-uppercase mb-4">Contact</h5>
                        <ul class="list-unstyled">
                            <li class="mb-2"><a href="#" class="text-white text-decoration-none">Instagram</a></li>
                            <li class="mb-2"><a href="#" class="text-white text-decoration-none">Facebook</a></li>
                            <li class="mb-2"><a href="#" class="text-white text-decoration-none">Twitter</a></li>
                            <li><a href="#" class="text-white text-decoration-none">Email Us</a></li>
                        </ul>
                    </div>
                </div>
                
                <hr class="my-4 bg-secondary">
                
                <div class="row">
                    <div class="col-md-6 text-center text-md-start">
                        <p class="mb-0">&copy; 2025 SHOP.CO. All rights reserved.</p>
                    </div>
                    <div class="col-md-6 text-center text-md-end">
                        <img src="/img/icon-pay-05.png" alt="Payment methods" class="img-fluid" style="max-height: 30px;">
                    </div>
                </div>
            </div>
        </footer>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>
        <script>
            async function toggleWishlist(productId) {
                try {
                    const response = await fetch('/auth/wishlist', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ product_id: productId })
                    });

                    const data = await response.json();

                    if (response.ok) {
                        alert(data.message);
                        if (data.message === 'Berhasil ditambahkan ke wishlist!') {
                            window.location.reload();
                        }
                    } else {
                        alert(data.message || 'Gagal menambahkan ke wishlist');
                    }
                } catch (error) {
                    console.error('Error:', error);
                    alert('Anda harus login terlebih dahulu');
                    window.location.href = '/login';
                }
            }
        </script>
    </body>
</html>